- defaults:
    link:
      relink: true
      create: true
    shell:
      stdout: true
      stderr: true

- clean: ["~"]

- create:
    - ~/code

- shell:
    - description: Hush login
      command: "[ -f ~/.hushlogin ] || touch ~/.hushlogin"
    - description: Install Brew
      command: '[ -x "$(command -v brew)" ] || /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"'
    - description: Update Brew
      command: "brew update"
    - description: Install Brewfile packages
      command: "brew bundle"
    - description: Installing oh-my-zsh
      command: '[ -d ~/.oh-my-zsh ] || RUNZSH=no KEEP_ZSHRC=yes /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"'
    - description: Install TPM
      command: "[ -d ~/.tmux/plugins/tpm ] || git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm"
    - description: Validating sudo credentials
      command: "sudo --validate"
    - description: Install Valet
      command: '[ -x "$(command -v valet)" ] || (composer global require laravel/valet && ~/.composer/vendor/bin/valet install && ~/.composer/vendor/bin/valet trust && ~/.composer/vendor/bin/valet park ~/code)'
    - description: Clear sudo credential cache
      command: "sudo --reset-timestamp"

- link:
    ~/.dotfiles: "" # Creates symlink to dotfiles directory itself
    ~/.config/nvim: nvim
    ~/.config/karabiner: karabiner
    ~/.config/kitty: kitty
    ~/.aliases: aliases
    ~/.vimrc: vimrc
    ~/.ideavimrc: ideavimrc
    ~/.global_gitignore: global_gitignore
    ~/.gitconfig: gitconfig
    ~/Library/Application Support/Code/User/keybindings.json: vscode/keybindings.json
    ~/Library/Application Support/Code/User/settings.json: vscode/settings.json
    ~/Library/Application Support/lazygit/config.yml: lazygit/config.yml
    ~/.hammerspoon: hammerspoon
    ~/.tmux.conf: tmux/tmux.conf
    ~/.zshrc: zsh/zshrc
    ~/.zprofile: zsh/zprofile
    ~/.oh-my-zsh/themes/custom.zsh-theme: zsh/themes/custom.zsh-theme
